(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e){e.exports=JSON.parse('{"ratings":[{"title":"9+","imdb":9},{"title":"8+","imdb":8},{"title":"7+","imdb":7},{"title":"6+","imdb":6},{"title":"5+","imdb":5}],"sorts":[{"title":"A - Z","sort":"title asc"},{"title":"Z - A","sort":"title desc"},{"title":"filter.newest","sort":"year desc"},{"title":"filter.oldest","sort":"year asc"},{"title":"filter.mostPopular","sort":"rating desc"},{"title":"filter.leastPopular","sort":"rating asc"}],"genres":[{"title":"genres.comedy","genre":"comedy"},{"title":"genres.sci-fi","genre":"sci-fi"},{"title":"genres.horror","genre":"horror"},{"title":"genres.romance","genre":"romance"},{"title":"genres.action","genre":"action"},{"title":"genres.thriller","genre":"thriller"},{"title":"genres.drama","genre":"drama"},{"title":"genres.documentary","genre":"documentary"},{"title":"genres.mystery","genre":"mystery"},{"title":"genres.crime","genre":"crime"},{"title":"genres.animation","genre":"animation"},{"title":"genres.adventure","genre":"adventure"},{"title":"genres.fantasy","genre":"fantasy"},{"title":"genres.superhero","genre":"superhero"},{"title":"genres.biography","genre":"biography"},{"title":"genres.family","genre":"family"},{"title":"genres.history","genre":"history"},{"title":"genres.film-noir","genre":"film-noir"},{"title":"genres.musical","genre":"musical"},{"title":"genres.sport","genre":"sport"},{"title":"genres.war","genre":"war"}]}')},349:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(17),o=r.n(c),s=r(53),i=r(7),u=r.n(i),l=r(12),b=r(11),d=r(19),m=r(74),p=r(65),j=r(438),f=r(431),h=r(413),g=r(412),v=r(432),O=r(190),x="#060629",w="#121421",y="#1b1d2f",A="#ffffff",k="#707281",C="#fb3b64",E=Object(O.a)({palette:{type:"dark",primary:{main:C},background:{default:x,secondary:w},text:{primary:A,secondary:k}},typography:{fontFamily:["Roboto","sans-serif"],body2:{fontWeight:500}},appBar:{color:w},overrides:{MuiCssBaseline:{"@global":{body:{backgroundColor:x}}},MuiDialogContent:{root:{backgroundColor:w}},MuiDialogTitle:{root:{backgroundColor:w}},MuiFormLabel:{root:{"&$focused":{color:"white"},"&focused":{color:"white"}}},MuiOutlinedInput:{root:{position:"relative","& $notchedOutline":{borderColor:k},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"white","@media (hover: none)":{borderColor:k}},"&$focused $notchedOutline":{borderColor:A,borderWidth:1}}},MuiButton:{root:{borderRadius:5},outlinedPrimary:{color:A,background:"linear-gradient(90deg, #fb3b64 30%, #ba01e2 70%)","&:hover":{background:x,borderColor:C}},outlinedSecondary:{color:A,"&:hover":{background:"linear-gradient(90deg, #fb3b64 30%, #ba01e2 70%)",borderColor:C}}},MuiAutocomplete:{listbox:{backgroundColor:y},option:{backgroundColor:y},noOptions:{backgroundColor:y}}}}),S=r(8),I=r(170),B=r(420),N=r(419),R=r(10),P=r(409),T=r(421),W=r(422),M=r(424),D=r(423),L=r(66),V=r(425),z=r(178),G=r.n(z),U=function(e,t){var r=Object(a.useState)(!1),n=Object(b.a)(r,2),c=n[0],o=n[1];return{component:e,open:c,setOpen:o,handleClickOpen:function(){o(!0)},handleClose:function(){o(!1)},maxWidth:t}},X=r(191),Y=r(5),F=r(437),H=r(406),Z=r(408),q=r(407),J=r(171),Q=r.n(J),K=r(1),$=Object(Y.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,r=e.classes,a=e.onClose,n=Object(X.a)(e,["children","classes","onClose"]);return Object(K.jsxs)(H.a,Object(S.a)(Object(S.a)({disableTypography:!0,className:r.root},n),{},{children:[Object(K.jsx)(L.a,{variant:"h6",children:t}),a?Object(K.jsx)(q.a,{"aria-label":"close",className:r.closeButton,onClick:a,children:Object(K.jsx)(Q.a,{})}):null]}))})),_=Object(Y.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Z.a),ee=function(e){return Object(K.jsx)("div",{children:Object(K.jsxs)(F.a,{fullWidth:!0,maxWidth:e.maxWidth,onClose:e.handleClose,"aria-labelledby":"customized-dialog-title",open:e.open,children:[Object(K.jsx)($,{id:"customized-dialog-title",onClose:e.handleClose}),Object(K.jsxs)(_,{children:[" ",e.component]})]})})},te=r(435),re=r(410),ae=Object(P.a)((function(e){var t;return{imdb:{color:e.palette.primary.main,marginRight:"1rem"},year:{marginRight:"1rem"},genre:{marginRight:"1rem"},description:(t={color:e.palette.text.secondary},Object(R.a)(t,e.breakpoints.up("xs"),{marginBottom:"3rem",marginTop:"1rem"}),Object(R.a)(t,"marginBottom","1rem"),Object(R.a)(t,"marginTop","1rem"),t)}})),ne=function(e){var t=e.movie,r=ae(),a=Object(re.a)("(max-width:600px)");return Object(K.jsxs)("div",{children:[Object(K.jsx)(L.a,{component:"h1",variant:a?"h5":"h2",children:t.title}),Object(K.jsxs)(v.a,{mt:3,display:"flex",flexDirection:a?"column":"row",children:[t.imdbRating>=0&&Object(K.jsxs)(L.a,{variant:"body2",className:r.imdb,children:["IMDb ",t.imdbRating]}),Object(K.jsx)(L.a,{variant:"body2",className:r.genre,children:t.genre}),Object(K.jsx)(L.a,{variant:"body2",className:r.year,children:t.year}),t.length&&Object(K.jsxs)(L.a,{variant:"body2",children:[t.length," min"]})]}),Object(K.jsx)(L.a,{variant:"body1",className:r.description,children:t.description})]})},ce=Object(P.a)((function(e){var t;return{root:(t={},Object(R.a)(t,e.breakpoints.up("xs"),{marginTop:"3rem",marginBottom:"5rem"}),Object(R.a)(t,"marginBottom","1rem"),Object(R.a)(t,"marginTop","2rem"),t),intro:{marginTop:"1rem",marginBottom:"1rem",color:e.palette.text.secondary}}})),oe=function(e){var t=e.movie,r=ce(),a=Object(j.a)().t,n=[{text:t.director?"".concat(a("movie.director"),": ").concat(t.director):""},{text:t.cast?"".concat(a("movie.cast"),": ").concat(t.cast):""},{text:"".concat(a("movie.subtitles"),": ").concat(t.subtitles&&t.subtitles.length>0?t.subtitles.map((function(e){return a("form.".concat(e))})).join(", "):a("movie.notAvailable"))}];return Object(K.jsx)("div",{className:r.root,children:n.map((function(e,t){return Object(K.jsx)(L.a,{variant:"body2",className:r.intro,children:e.text},"detail-".concat(t))}))})},se=r(411),ie=r(440),ue=r(20),le=r.n(ue),be="/api/movies",de=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("".concat(be,"/").concat(r,"/comments"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),me=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.get("".concat(be,"/").concat(t,"/comments"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.patch("".concat(be,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je={createComment:de,getMovieData:function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.get("".concat(be,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setWatched:pe,getComments:me},fe=function(){var e=Object(a.useState)({show:!1,severity:"",message:""}),t=Object(b.a)(e,2),r=t[0],n=t[1];return{values:r,showError:function(e){n({show:!0,severity:"error",message:e})},showSuccess:function(e){n({show:!0,severity:"success",message:e})},closeAlert:function(){n({show:!1,severity:"info",message:""})}}},he=Object(P.a)((function(){return{title:{marginBottom:"2rem"},buttonStyle:{marginTop:"2rem",width:"15%",borderColor:"#292b3c",padding:"0.7rem"},input:{"&.MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"#292b3c"}}}})),ge=function(e){var t=e.imdbCode,r=e.setRefresh,c=he(),o=Object(a.useState)(""),s=Object(b.a)(o,2),i=s[0],d=s[1],m=Object(a.useState)(!1),p=Object(b.a)(m,2),f=p[0],h=p[1],g=fe(),v=Object(j.a)().t,O=n.a.useRef(!0);Object(a.useEffect)((function(){return function(){return O.current=!1}}),[]);var x=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,je.createComment({comment:i},t);case 4:if(!1!==O.current){e.next=6;break}return e.abrupt("return",null);case 6:d(""),r(!0),g.showSuccess(v("comment.success")),e.next=25;break;case 11:if(e.prev=11,e.t0=e.catch(0),!e.t0.response||!e.t0.response.data||!0!==O.current){e.next=25;break}e.t1=e.t0.response.data.statusCode,e.next=400===e.t1?17:401===e.t1?19:500===e.t1?21:23;break;case 17:return g.showError(v("comment.invalidFormat")),e.abrupt("break",25);case 19:return g.showError(v("error.unauthorized")),e.abrupt("break",25);case 21:return g.showError(v("error.server")),e.abrupt("break",25);case 23:return g.showError(v("error.unexpected")),e.abrupt("break",25);case 25:h(!1);case 26:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(K.jsxs)("div",{children:[Object(K.jsx)(L.a,{component:"h2",variant:"h5",className:c.title,children:v("comment.leaveComment")}),g.values.show&&Object(K.jsx)(te.a,{className:c.title,severity:g.values.severity,onClose:g.closeAlert,children:g.values.message}),Object(K.jsx)(ie.a,{fullWidth:!0,multiline:!0,rows:"7",label:"Leave your comment here",value:i,className:c.input,onChange:function(e){return d(e.target.value)}}),Object(K.jsx)(se.a,{onClick:x,variant:"outlined",color:"secondary",size:"small",disabled:f,className:c.buttonStyle,children:v("comment.post")})]})},ve=r(6),Oe=r.n(ve),xe=r.p+"static/media/emptyAvatar.1e3110ae.png",we=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},imageContainer:{width:"200px",height:"200px",overflow:"hidden",marginTop:"16px",display:"flex",alignItems:"center",justifyContent:"center"},image:{maxWidth:"200px",maxHeight:"200px",display:"block",cursor:"pointer"},username:{marginTop:e.spacing(2)}}})),ye=function(e){var t=e.user,r=we(),a=Object(j.a)().t;return t?Object(K.jsxs)(g.a,{component:"main",className:r.paper,maxWidth:"xs",children:[Object(K.jsx)(h.a,{}),Object(K.jsx)(L.a,{component:"h2",variant:"h5",gutterBottom:!0,children:a("profile.title")}),Object(K.jsx)(v.a,{className:r.imageContainer,children:Object(K.jsx)("img",{className:r.image,src:t.avatar||xe,alt:t.username})}),Object(K.jsxs)(L.a,{variant:"body1",className:r.username,children:[t.firstname," ",t.lastname]}),Object(K.jsx)(L.a,{variant:"body1",children:t.username})]}):null};ye.defaultProps={user:Oe.a.shape({username:"",firstname:"",lastname:"",avatar:null})};var Ae=ye,ke=r(442),Ce=function(e){var t=e.user,r=U(Object(K.jsx)(Ae,{user:t}));return Object(K.jsxs)("div",{children:[Object(K.jsx)(se.a,{onClick:r.handleClickOpen,children:Object(K.jsx)(ke.a,{alt:t.username,src:t.avatar?t.avatar:xe})}),Object(K.jsx)(ee,Object(S.a)({},r))]})},Ee=r(414),Se=r(415),Ie=r(417),Be=r(416),Ne=Object(P.a)((function(){return{root:{marginTop:"2rem"},comment:{paddingLeft:0}}})),Re=function(e){var t=e.comments,r=Ne();return t?Object(K.jsx)(K.Fragment,{children:Object(K.jsx)("div",{className:r.root,children:Object(K.jsx)(Ee.a,{children:t.map((function(e){return Object(K.jsxs)(Se.a,{alignItems:"flex-start",className:r.comment,children:[Object(K.jsx)(Be.a,{children:Object(K.jsx)(Ce,{user:e.user})}),Object(K.jsx)(Ie.a,{primary:e.user.username,secondary:Object(K.jsx)(L.a,{component:"span",color:"textSecondary",children:e.comment})})]},e._id)}))})})}):Object(K.jsx)("div",{})},Pe=r(175),Te=r.n(Pe),We=r(418),Me=r(176),De=r.n(Me),Le=r.p+"static/media/video-banner.a05495e9.png",Ve=function(e){var t=e.subsTracks,r=e.imdbCode,n=localStorage.getItem("token"),c=Object(j.a)().t,o=Object(a.useRef)(null),s="/api/movies/".concat(r,"/play/").concat(n),i=Object(a.useState)(""),u=Object(b.a)(i,2),l=u[0],d=u[1],m=Object(a.useState)(!1),p=Object(b.a)(m,2),f=p[0],h=p[1],g=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return function(){!0===g.current&&window.location.reload()}}),[]),Object(K.jsxs)("div",{className:"player-wrapper",children:[Object(K.jsx)(Te.a,{className:"react-player",ref:o,playing:!0,controls:!1===g.current,pip:!1,url:s,onPlay:function(){d(c("movie.playing")),je.setWatched(r)},width:"100%",light:Le,playIcon:Object(K.jsx)(De.a,{fontSize:"large"}),onBuffer:function(){d(c("movie.buffering")),g.current=!0},onProgress:function(e){e.playedSeconds>e.loadedSeconds&&!f&&(d(c("movie.notLoadedError")),o.current.showPreview())},onError:function(e){e&&e.target&&e.target.error&&(3===e.target.error.code||4===e.target.error.code||1===e.target.error.code)&&(d(c("movie.sourceFileError")),h(!0),o.current.showPreview())},onPause:function(){d(c("movie.paused"))},onReady:function(){g.current=!1},onBufferEnd:function(){d(c("movie.playing")),g.current=!1},onClickPreview:function(){d(c("movie.buffering")),g.current=!0},config:{file:{attributes:{crossOrigin:"true"},tracks:t}}}),Object(K.jsx)("div",{children:Object(K.jsx)(L.a,{variant:"body2",style:{color:"#707281",fontStyle:"italic"},children:l})}),!0===g.current&&Object(K.jsx)(We.a,{})]})},ze=function(){return Object(K.jsx)(v.a,{p:3,textAlign:"center",children:Object(K.jsx)(N.a,{})})},Ge=function(e,t,r){var a={en:r("form.en"),de:r("form.de"),fi:r("form.fi"),ru:r("form.ru")},n=localStorage.getItem("token");return t.reduce((function(t,r){return t.push({label:a[r],kind:"subtitles",src:""+"/api/movies/".concat(e,"/subtitles/").concat(r,"/").concat(n),srcLang:r}),t}),[])},Ue=function(e){var t=Object(j.a)().t,r=Object(a.useState)({}),c=Object(b.a)(r,2),o=c[0],s=c[1],i=Object(a.useState)([]),d=Object(b.a)(i,2),m=d[0],p=d[1],f=fe(),h=Object(a.useState)(!0),g=Object(b.a)(h,2),O=g[0],x=g[1],w=Object(re.a)("(max-width:600px)"),y=Object(a.useState)(!1),A=Object(b.a)(y,2),k=A[0],C=A[1],E=n.a.useRef(!0),I=function(){var r=Object(l.a)(u.a.mark((function r(){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,je.getMovieData(e.movie.imdbCode);case 3:if(a=r.sent,E.current){r.next=6;break}return r.abrupt("return",null);case 6:s(Object(S.a)(Object(S.a)({},a),{},{imdbRating:e.movie.imdbRating})),e.movie.seeds<=-1&&f.showError(t("movie.noSeeds")),p(Ge(e.movie.imdbCode,a.subtitles,t)),C(!1),r.next=26;break;case 12:if(r.prev=12,r.t0=r.catch(0),!r.t0.response||!r.t0.response.data){r.next=26;break}r.t1=r.t0.response.data.statusCode,r.next=401===r.t1?18:404===r.t1?20:500===r.t1?22:24;break;case 18:return f.showError(t("error.unauthorized")),r.abrupt("break",26);case 20:return f.showError(t("error.notFound")),r.abrupt("break",26);case 22:return f.showError(t("error.server")),r.abrupt("break",26);case 24:return f.showError(t("error.unexpected")),r.abrupt("break",26);case 26:x(!1);case 27:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(){return r.apply(this,arguments)}}();Object(a.useEffect)((function(){return I(),function(){E.current=!1}}),[]);var B=function(){var r=Object(l.a)(u.a.mark((function r(){var a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,je.getComments(e.movie.imdbCode);case 3:if(a=r.sent,E.current){r.next=6;break}return r.abrupt("return",null);case 6:s(Object(S.a)(Object(S.a)({},o),{},{comments:a.comments})),C(!1),r.next=22;break;case 10:if(r.prev=10,r.t0=r.catch(0),!r.t0.response||!r.t0.response.data){r.next=22;break}r.t1=r.t0.response.data.statusCode,r.next=401===r.t1?16:500===r.t1?18:20;break;case 16:return f.showError(t("error.unauthorized")),r.abrupt("break",22);case 18:return f.showError(t("error.server")),r.abrupt("break",22);case 20:return f.showError(t("error.unexpected")),r.abrupt("break",22);case 22:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(){return r.apply(this,arguments)}}();return Object(a.useEffect)((function(){B()}),[k]),O?Object(K.jsx)(ze,{}):Object(K.jsxs)(v.a,{m:w?1:7,children:[f.values.show&&Object(K.jsx)(te.a,{style:{marginBottom:"2rem"},severity:f.values.severity,onClose:f.closeAlert,children:f.values.message}),Object(K.jsx)(ne,{movie:o}),e.movie&&e.movie.seeds>-1&&Object(K.jsx)(Ve,{subsTracks:m,imdbCode:e.movie.imdbCode,seeds:e.movie.seeds}),Object(K.jsx)(oe,{movie:o}),e.movie&&e.movie.imdbCode&&Object(K.jsx)(ge,{imdbCode:e.movie.imdbCode,setRefresh:C}),o.comments&&Object(K.jsx)(Re,{comments:o.comments})]})},Xe=r.p+"static/media/emptyThumbnail.7287d0fc.png",Ye=Object(P.a)((function(e){var t,r;return{root:(t={maxWidth:345,margin:"auto"},Object(R.a)(t,e.breakpoints.down("xs"),{width:"auto"}),Object(R.a)(t,"&.MuiPaper-elevation1",{boxShadow:"0px 15px 13px 0px rgba(0,0,0,0.2)"}),Object(R.a)(t,"&.MuiPaper-rounded",{borderRadius:"0px"}),t),cardMedia:(r={height:"400px"},Object(R.a)(r,e.breakpoints.down("xs"),{height:"250px"}),Object(R.a)(r,"width","100%"),Object(R.a)(r,"objectFit","cover"),r),title:{marginBottom:"10px",minHeight:"65px"},cardContent:{textAlign:"center",backgroundColor:e.palette.background.default},overlay:{opacity:.5},watchedIcon:{position:"absolute",top:"10px",right:"10px"}}})),Fe=function(e){var t=e.movie,r=U(Object(K.jsx)(Ue,{movie:t}),"lg"),a=Ye();return Object(K.jsxs)(B.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:[Object(K.jsx)(T.a,{onClick:r.handleClickOpen,className:a.root,children:Object(K.jsxs)(W.a,{children:[Object(K.jsx)(D.a,{className:a.cardMedia+" "+(t.watched?a.overlay:""),component:"img",alt:t.title,image:t.thumbnail,title:t.title,onError:function(e){return e.target.src=Xe}}),Object(K.jsxs)(M.a,{className:a.cardContent,children:[t.watched&&Object(K.jsx)(V.a,{title:"watched movie",children:Object(K.jsx)(G.a,{className:a.watchedIcon})}),Object(K.jsx)(L.a,{color:t.watched?"textSecondary":"textPrimary",component:"h2",variant:"h6",className:a.title,children:t.title}),Object(K.jsxs)(v.a,{justifyContent:"space-between",display:"flex",children:[Object(K.jsxs)(L.a,{color:"textSecondary",children:["IMDb ",t.imdbRating]}),Object(K.jsx)(L.a,{color:"textSecondary",children:t.year})]})]})]})}),Object(K.jsx)(ee,Object(S.a)({},r))]})},He=r(434),Ze=r(433),qe=function(e){var t=e.options,r=e.label,a=e.id,n=e.onChange;return Object(K.jsx)(He.a,{size:"small",id:a,onChange:n,options:t,getOptionLabel:function(e){return e.title},getOptionSelected:function(e){return e.title},renderInput:function(e){return Object(K.jsx)(Ze.a,Object(S.a)(Object(S.a)({},e),{},{variant:"outlined",label:r}))}})},Je=r(426),Qe=r(443),Ke=r(427),$e=r(179),_e=r.n($e),et=function(e){var t=e.onChange,r=e.label,a=e.onClick,n=e.onKeyDown;return Object(K.jsxs)(Je.a,{size:"small",fullWidth:!0,variant:"outlined",children:[Object(K.jsx)(Qe.a,{htmlFor:"outlined-adornment-amount",children:r}),Object(K.jsx)(ie.a,{type:"search",style:{borderRadius:"50px"},id:"outlined-adornment-amount",onKeyDown:n,onChange:t,endAdornment:Object(K.jsx)(Ke.a,{position:"end",children:Object(K.jsx)(se.a,{onClick:a,children:Object(K.jsx)(_e.a,{})})}),labelWidth:140})]})},tt=r(105),rt=function(e){var t=e.clearInput,r=e.filter,a=e.setFilter,c=e.setSearch,o=Object(j.a)().t,s=n.a.useState(!1),i=Object(b.a)(s,2),u=i[0],l=i[1],d=[{id:"movie-imdb",label:"filter.ratingLabel",options:tt.ratings,name:"imdb"},{id:"movie-genre",label:"filter.genreLabel",options:tt.genres.map((function(e){return{title:o(e.title),genre:e.genre}})),name:"genre"},{id:"movie-sort",label:"filter.sortLabel",options:tt.sorts.map((function(e){return{title:o(e.title),sort:e.sort}})),name:"sort"}];return n.a.useEffect((function(){l(!u)}),[t]),Object(K.jsx)(v.a,{py:5,children:Object(K.jsxs)(B.a,{container:!0,direction:"row",spacing:1,justify:"space-evenly",children:[Object(K.jsx)(B.a,{item:!0,xs:12,sm:12,md:12,lg:3,children:Object(K.jsx)(et,{onKeyDown:function(e){return"Enter"===e.key&&a(Object(S.a)({},r))},onChange:function(e){return c(e.target.value)},label:o("filter.searchLabel"),onClick:function(){a(Object(S.a)({},r))}},u)}),d.map((function(e){return Object(K.jsx)(B.a,{item:!0,xs:12,sm:4,md:4,lg:3,children:Object(K.jsx)(qe,{id:e.id,label:o(e.label),options:e.options,onChange:function(t,n){return a(Object(S.a)(Object(S.a)({},r),{},Object(R.a)({},e.name,n&&n[e.name]||null)))}},u)},e.id)}))]})})},at=function(e,t){var r=Object.keys(e).reduce((function(t,r){if("sort"===r&&e[r]){var a=e[r].split(" ");t+="&sort_by=".concat(a[0],"&order_by=").concat(a[1])}else t+=e[r]?"&".concat(r,"=").concat(e[r]):"";return t}),"");return e.sort||(r+=t?"&sort_by=title&order_by=asc":"&sort_by=rating&order_by=desc"),r+=t?"&search=".concat(t):""},nt={getMovies:function(){var e=Object(l.a)(u.a.mark((function e(t,r,a){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=at(r,a),e.next=3,le.a.get("/api/movies"+"?page=".concat(t).concat(n));case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}()},ct=function(){return Object(K.jsx)(v.a,{p:3,textAlign:"center",children:Object(K.jsx)(N.a,{})})},ot=function(e){var t=e.setUser,r=e.clearFilter,a=Object(j.a)().t,c=n.a.useState([]),o=Object(b.a)(c,2),s=o[0],i=o[1],d=n.a.useState({page:0,hasMore:!0,loading:!0}),m=Object(b.a)(d,2),p=m[0],f=m[1],h=n.a.useState(""),g=Object(b.a)(h,2),O=g[0],x=g[1],w=n.a.useState({}),y=Object(b.a)(w,2),A=y[0],k=y[1],C=n.a.useState(!1),E=Object(b.a)(C,2),N=E[0],R=E[1],P=n.a.useRef(!0),T=n.a.useRef(!1),W=function(){var e=Object(l.a)(u.a.mark((function e(){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=T.current?1:p.page+1,e.next=4,nt.getMovies(r,A,O);case 4:if(n=e.sent,P.current){e.next=7;break}return e.abrupt("return",null);case 7:T.current?(i(n.movies),T.current=!1):i(s.concat(n.movies)),f({page:0===n.movies.length?a("gallery.noMovies"):r,loading:!1,hasMore:n.hasMore}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status&&(t({userId:"",lang:""}),localStorage.removeItem("token"));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return n.a.useEffect((function(){return function(){P.current=!1}}),[]),n.a.useEffect((function(){(Object.values(A).filter((function(e){return e})).length>0||O)&&(x(""),k({}),R(!N))}),[r]),n.a.useEffect((function(){T.current=!0,f(Object(S.a)(Object(S.a)({},p),{},{loading:!0})),W()}),[A]),Object(K.jsxs)("div",{children:[Object(K.jsx)(rt,{clearInput:N,setSearch:x,filter:A,setFilter:k}),p.loading?Object(K.jsx)(ct,{}):Object(K.jsxs)(I.a,{style:{overflow:"none"},dataLength:s.length,next:W,hasMore:p.hasMore,endMessage:Object(K.jsx)(v.a,{p:3,textAlign:"center",children:p.page}),loader:Object(K.jsx)(ct,{}),children:[Object(K.jsx)(B.a,{container:!0,spacing:3,children:s.map((function(e,t){return Object(K.jsx)(Fe,{movie:e},t)}))}),Object(K.jsx)(v.a,{p:3})]})]})},st=r(180),it=r(44),ut=/^[\w'A-Za-z\u0430-\u044f -][^_,.!\xa1?\xf7\xbf/\\+=@#$%\u02c6&*(){}|~<>;:[\]]*$/,lt=it.a().shape({username:it.b().min(2,"formValidation.minLen").matches(ut,"formValidation.nameFormat").max(45,"formValidation.maxLen"),name:it.b().min(2,"formValidation.minLen").matches(ut,"formValidation.nameFormat").max(45,"formValidation.maxLen"),email:it.b().email("formValidation.emailFormat"),password:it.b().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})/,"formValidation.passwordFormat"),loginEmail:it.b(),loginPassword:it.b(),updateUsername:it.b().matches(/^[\w'A-Za-z\u0430-\u044f -][^_,.!\xa1?\xf7\xbf/\\+=@#$%\u02c6&*(){}|~<>;:[\]]*$|^$/,"formValidation.nameFormat").test("empty-or-min-2-chars","formValidation.minLen",(function(e){return!e||e.length>1})).max(45,"formValidation.maxLen"),updateName:it.b().test("empty-or-min-2-chars","formValidation.minLen",(function(e){return!e||e.length>1})).matches(ut,"formValidation.nameFormat").max(45,"formValidation.maxLen")}),bt=function(e,t,r){var n=Object(j.a)().t,c=Object(a.useState)({value:"",helperText:"",error:!1,isValid:"",isInvalid:""}),o=Object(b.a)(c,2),s=o[0],i=o[1];return{type:e,onChange:function(e){var r=e.target.value;lt.validate(Object(R.a)({},t,r)).then((function(){i({value:r,error:!1,helperText:r?n("formValidation.correct"):""})})).catch((function(e){i({value:r,error:!0,helperText:n(e.errors)})}))},helperText:s.helperText,value:s.value,error:s.error,values:s,setValues:i,id:r,setError:function(e){i(Object(S.a)(Object(S.a)({},s),{},{helperText:n(e),error:!0}))}}},dt=function(e){e?le.a.defaults.headers.authorization="Bearer "+e:delete le.a.defaults.headers.authorization},mt="/api/auth",pt=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("/api/auth/login",{email:t,password:r});case 2:return a=e.sent,localStorage.setItem("token",a.data.token),dt(a.data.token),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),jt=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("/api/auth/recoverylink",{email:t});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.get("/api/auth/google");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ht=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.get("/api/auth/42");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gt={login:pt,recoveryLink:jt,getToken:function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.get(mt+"/token/".concat(t));case 2:return 200===(r=e.sent).status&&r.data.token&&localStorage.setItem("token",r.data.token),e.abrupt("return",r.data.token);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),googleUrl:ft,fortytwoUrl:ht},vt=function(e){var t=e.values,r=e.label,a=void 0===r?"":r,n=e.required,c=e.autocomplete,o=void 0===c?"off":c,s=e.inputRef,i=void 0===s?null:s,u=t.error,l=t.value,b=t.onChange,d=t.helperText,m=t.type,p=t.id;return Object(K.jsx)(Ze.a,{id:p,error:u,value:l,onChange:b,variant:"outlined",margin:"normal",required:n,fullWidth:!0,name:a,label:a,helperText:d,autoFocus:!0,autoComplete:o,type:m,inputRef:i})},Ot=Object(P.a)((function(e){return{submit:{margin:e.spacing(3,0,2)}}})),xt=function(e){var t=e.name,r=Ot();return Object(K.jsx)(se.a,{type:"submit",fullWidth:!0,variant:"outlined",color:"primary",className:r.submit,children:t})},wt={showErrors:function(e,t){e.map((function(e){"username"===e.param?t.username.setError(e.reason):"firstname"===e.param?t.firstName.setError(e.reason):"lastname"===e.param?t.lastName.setError(e.reason):"email"===e.param?t.email.setError(e.reason):"password"===e.param?t.password.setError(e.reason):"confirmPassword"===e.param?t.confirmPassword.setError(e.reason):"oldPassword"===e.param&&t.oldPassword.setError(e.reason)}))}},yt=wt,At=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)}}})),kt=function(){var e=Object(j.a)().t,t=Object(a.useRef)(),r=bt("email","email","forgot-email"),n=fe(),c=function(){var t=Object(l.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,gt.recoveryLink(r.value);case 4:n.showSuccess(e("pwRecovery.checkEmail")),t.next=18;break;case 7:t.prev=7,t.t0=t.catch(1),t.t1=t.t0.response.data.statusCode,t.next=400===t.t1?12:500===t.t1?14:16;break;case 12:return yt.showErrors(t.t0.response.data.details,{email:r}),t.abrupt("break",18);case 14:return n.showError(e("error.server")),t.abrupt("break",18);case 16:return n.showError(e("error.unexpected")),t.abrupt("break",18);case 18:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){t.current&&t.current.focus()}),[]);var o=At();return Object(K.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(K.jsx)(h.a,{}),Object(K.jsxs)("div",{className:o.paper,children:[Object(K.jsx)(L.a,{component:"h1",variant:"h5",children:e("pwRecovery.title")}),Object(K.jsxs)("form",{className:o.form,onSubmit:c,noValidate:!0,children:[Object(K.jsx)(vt,{values:r,label:e("form.email"),required:!0}),n.values.show&&Object(K.jsx)(te.a,{severity:n.values.severity,onClose:n.closeAlert,children:n.values.message}),Object(K.jsx)(xt,{name:e("pwRecovery.send")})]}),Object(K.jsx)("div",{children:e("pwRecovery.helper")})]})]})},Ct=Object(P.a)((function(e){return{button:{margin:e.spacing(3,0,0),borderColor:"#1b1d2f",background:"#1b1d2f"},buttonIcon:{position:"absolute",left:"1px",width:"32px",height:"32px",background:"white",padding:"7px",borderRadius:"3px",marginRight:"15px"}}})),Et=function(e){var t=e.handleClick,r=e.name,a=e.logo,n=Ct();return Object(K.jsxs)(se.a,{type:"submit",variant:"outlined",fullWidth:!0,color:"secondary",className:n.button,onClick:t,children:[Object(K.jsx)("img",{className:n.buttonIcon,src:a,alt:r,title:r}),r]})},St=function(){var e=Object(j.a)().t,t=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt.googleUrl();case 3:t=e.sent,window.location=t.url,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gt.fortytwoUrl();case 3:t=e.sent,window.location=t.url,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(Et,{handleClick:t,name:e("login.google"),logo:"data:image/png;base64,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"}),Object(K.jsx)(Et,{handleClick:r,name:e("login.42"),logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAACX0lEQVRoBe2ZO07EMBCGl2eLoEfbIHEDSq6wQAUnQBQIDkENlIAooQDE4zhIaEXBAQBRgXj9f5CjyJvYk13HC2ZGmk3WHjvzzUy8TrbVUtEIaAQ0AhoBjYBGYFgRGGnwwlOYe1Q4/xPsvgq2HMfxoeUz9IRmvm2ccHJC+HTXDCoc5wTjOO8rdENoS/suNLgMCkuHJMCE7UDnob6gmv7gwCFg4b8X2MDSdmjAoWB9wEXYoQHXgd2jlx6pKuk3jFuyxkbP8BYckC5QEljylAGXwdI2KnATsGXAVbBRgddxtdCZJQClmGEXLG2jZLhJ2CIwYZfZ4JDGgevC9rObY4YlsIxDo8B1YPfhTD+whGhDV3gikMaA68AewNF+YQWMuckEzq6hZiflOr7Dbi0f6TlR2IqoHqL932Q2JuxVRcDtkmYZr0JFUqeMFVYU0npGXKCkmZX+pGUe1MnsEUbEumcVFsG271nNbFazJR8plLH9nFyC+dO0iYP0qecUtjPQ6cBqv93kAnUJtUu27DvLWAwL2+xNXtlEMdvadKQgxcdDnx+3hXGu0zF07oy7LBLqI+wJdMEupYQYcxTeHhfQbMeVOjBhz6D5S4SUgXtgAd5K9R4m7Dm0Z/VOMcOTVbBoF/+7R9u/IITlPduTWeM8S/rBfAl8nMV8LK1YYjLbiXVB+zp3aPBtGkz/oBsPwt4Irtf9rYvWB5x/hErkBUbH0EWob8zzbwW+h/PcsweXFFdpZ5AU2BmeBDo1wwkk0YmgGXaGJ4HOJn+HuWWVVhD/ElHRCGgENAIaAY2ARkAjkFYEvgElUn/FMFj7OwAAAABJRU5ErkJggg=="})]})},It=r(428),Bt=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)}}})),Nt=function(e){var t=e.setUser,r=Object(j.a)().t,n=Object(d.f)(),c=Object(a.useRef)(),o=bt("email","loginEmail","login-email"),s=bt("password","loginPassword","login-password"),i=fe(),b=Bt(),p=U(Object(K.jsx)(kt,{})),f=function(){var e=Object(l.a)(u.a.mark((function e(a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==o.value){e.next=4;break}return o.setValues(Object(S.a)(Object(S.a)({},o.values),{},{helperText:r("formValidation.required"),error:!0})),e.abrupt("return");case 4:if(""!==s.value){e.next=7;break}return s.setValues(Object(S.a)(Object(S.a)({},s.values),{},{helperText:r("formValidation.required"),error:!0})),e.abrupt("return");case 7:return e.prev=7,e.next=10,gt.login(o.value,s.value);case 10:c=Object(m.a)(localStorage.getItem("token")),t({userId:c.id,lang:c.lang}),n.push("/"),e.next=26;break;case 15:e.prev=15,e.t0=e.catch(7),e.t1=e.t0.response.data.statusCode,e.next=400===e.t1?20:500===e.t1?22:24;break;case 20:return i.showError(r("formValidation.invalidCredentials")),e.abrupt("break",26);case 22:return i.showError(r("formValidation.server")),e.abrupt("break",26);case 24:return i.showError(r("formValidation.unexpected")),e.abrupt("break",26);case 26:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){c.current&&c.current.focus()}),[]),Object(K.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(K.jsx)(h.a,{}),Object(K.jsxs)("div",{className:b.paper,children:[Object(K.jsx)(L.a,{component:"h2",variant:"h5",children:r("login.title")}),Object(K.jsx)(St,{}),Object(K.jsx)(v.a,{mt:3,children:r("form.or")}),Object(K.jsxs)("form",{className:b.form,onSubmit:f,noValidate:!0,children:[Object(K.jsx)(vt,{values:o,label:r("form.email"),required:!0,inputRef:c}),Object(K.jsx)(vt,{values:s,label:r("form.password"),autocomplete:"current-password",required:!0}),i.values.show&&Object(K.jsx)(te.a,{severity:i.values.severity,onClose:i.closeAlert,children:i.values.message}),Object(K.jsx)(xt,{name:r("login.login")})]}),Object(K.jsx)(v.a,{children:Object(K.jsx)(It.a,{href:"#",onClick:p.handleClickOpen,children:r("login.forgotPw")})})]}),Object(K.jsx)(ee,Object(S.a)({},p))]})},Rt="/api/users",Pt={get:function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.get(Rt+"/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("/api/users/",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.patch(Rt+"/".concat(t),r);case 2:return(a=e.sent).data.token&&localStorage.setItem("token",a.data.token),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),pwdUpdate:function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.patch("/api/users/",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Tt=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},select:{width:"100%",marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),Wt=function(){var e=Tt(),t=Object(j.a)().t,r=Object(a.useRef)(),n=bt("text","username","create-username"),c=bt("text","name","create-firstname"),o=bt("text","name","create-lastname"),s=bt("email","email","create-email"),i=bt("password","password","create-password"),d=bt("password","confirmPassword","create-confirm-password"),m=Object(a.useState)({label:t("form.en"),code:"en"}),f=Object(b.a)(m,2),O=f[0],x=f[1],w=fe(),y=[{label:t("form.en"),code:"en"},{label:t("form.de"),code:"de"},{label:t("form.fi"),code:"fi"},{label:t("form.ru"),code:"ru"}],A=function(){var e=Object(l.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,a={username:n.value,email:s.value,firstname:c.value,lastname:o.value,password:i.value,confirmPassword:d.value,language:O.code},e.next=5,Pt.create(a);case 5:w.showSuccess(t("createAccount.success")),e.next=19;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.response.data.statusCode,e.next=400===e.t1?13:500===e.t1?15:17;break;case 13:return yt.showErrors(e.t0.response.data.details,{username:n,firstName:c,lastName:o,email:s,password:i,confirmPassword:d}),e.abrupt("break",19);case 15:return w.showError(t("error.server")),e.abrupt("break",19);case 17:return w.showError(t("error.unexpected")),e.abrupt("break",19);case 19:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){r.current&&r.current.focus()}),[]),Object(K.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(K.jsx)(h.a,{}),Object(K.jsxs)("div",{className:e.paper,children:[Object(K.jsx)(L.a,{component:"h2",variant:"h5",children:t("createAccount.title")}),Object(K.jsx)(St,{}),Object(K.jsx)(v.a,{mt:3,children:t("form.or")}),Object(K.jsxs)("form",{className:e.form,onSubmit:A,noValidate:!0,children:[Object(K.jsx)(vt,{values:n,label:t("form.username"),required:!0,inputRef:r}),Object(K.jsx)(vt,{values:c,label:t("form.firstName"),required:!0}),Object(K.jsx)(vt,{values:o,label:t("form.lastName"),required:!0}),Object(K.jsx)(vt,{values:s,label:t("form.email"),required:!0}),Object(K.jsx)(vt,{values:i,label:t("form.password"),autocomplete:"new-password",required:!0}),Object(K.jsx)(vt,{values:d,label:t("form.confirmPassword"),autocomplete:"new-password",required:!0}),Object(K.jsx)(He.a,{id:"language",required:!0,value:O,options:y,getOptionLabel:function(e){return e.label},getOptionSelected:function(e,t){return e.value===t.value},className:e.select,onChange:function(e,r){null!==r&&(p.a.changeLanguage(r.code),x(Object(S.a)(Object(S.a)({},r),{},{label:t("form.".concat(r.code))})))},renderInput:function(e){return Object(K.jsx)(Ze.a,Object(S.a)(Object(S.a)({required:!0},e),{},{label:t("form.selectLanguage"),variant:"outlined"}))}}),w.values.show&&Object(K.jsx)(te.a,{severity:w.values.severity,onClose:w.closeAlert,children:w.values.message}),Object(K.jsx)(xt,{name:t("createAccount.create")})]})]})]})},Mt=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)}}})),Dt=function(){var e=Object(d.g)(),t=Object(j.a)().t,r=Object(a.useRef)(),n=bt("password","password","reset-password"),c=bt("password","password","reset-confirm-password"),o=fe(),s=Object(a.useState)({}),i=Object(b.a)(s,2),p=i[0],f=i[1];Object(a.useEffect)((function(){var a=e.search.split("=")[1];if(!a)return o.showError(t("pwRecovery.invalidLink"));try{var n=Object(m.a)(a);f({userId:n.id,resetToken:a})}catch(c){o.showError(t("pwRecovery.invalidLink"))}r.current&&r.current.focus()}),[]);var v=function(){var e=Object(l.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,a=Object(S.a)(Object(S.a)({},p),{},{password:n.value,confirmPassword:c.value}),e.next=5,Pt.pwdUpdate(a);case 5:o.showSuccess(t("pwRecovery.success")),e.next=20;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.response.data.statusCode,e.next=400===e.t1?13:500===e.t1?16:18;break;case 13:return yt.showErrors(e.t0.response.data.details,{password:n,confirmPassword:c}),e.t0.response.data.details.map((function(e){"userId"!==e.param&&"resetToken"!==e.param||o.showError(t("pwRecovery.invalidLink"))})),e.abrupt("break",20);case 16:return o.showError(t("error.server")),e.abrupt("break",20);case 18:return o.showError(t("error.unexpected")),e.abrupt("break",20);case 20:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),O=Mt();return Object(K.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(K.jsx)(h.a,{}),Object(K.jsxs)("div",{className:O.paper,children:[Object(K.jsx)(L.a,{component:"h1",variant:"h5",children:t("pwRecovery.pwResetTitle")}),Object(K.jsxs)("form",{className:O.form,onSubmit:v,noValidate:!0,children:[Object(K.jsx)(vt,{values:n,label:t("form.newPassword"),autocomplete:"new-password",required:!0,inputRef:r}),Object(K.jsx)(vt,{values:c,label:t("form.confirmPassword"),autocomplete:"confirm-password",required:!0}),o.values.show&&Object(K.jsx)(te.a,{severity:o.values.severity,onClose:o.closeAlert,children:o.values.message}),Object(K.jsx)(xt,{name:t("pwRecovery.save")})]})]})]})},Lt=Object(P.a)((function(e){var t,r,a,n,c;return{button:(t={},Object(R.a)(t,e.breakpoints.up("xs"),{width:"240px"}),Object(R.a)(t,e.breakpoints.up("sm"),{width:"300px",top:"60vh"}),Object(R.a)(t,"top","20vh"),Object(R.a)(t,"zIndex","1"),t),titleMobile:{fontWeight:600,marginTop:"25vh"},box:(r={},Object(R.a)(r,e.breakpoints.up("xs"),{flexDirection:"column"}),Object(R.a)(r,e.breakpoints.up("md"),{flexDirection:"row"}),r),video:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},cover:{background:"url(https://images.unsplash.com/photo-1519373344801-14c1f9539c9c?w=1920&h=1080&fit=crop&crop=bottom) no-repeat center",backgroundSize:"cover",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:"-1"},text:(a={},Object(R.a)(a,e.breakpoints.up("xl"),{fontSize:"calc(5px + 9vw + 0.8vh)"}),Object(R.a)(a,"position","absolute"),Object(R.a)(a,"top",0),Object(R.a)(a,"display","flex"),Object(R.a)(a,"justifyContent","center"),Object(R.a)(a,"alignItems","center"),Object(R.a)(a,"width","100%"),Object(R.a)(a,"height","100%"),Object(R.a)(a,"fontSize","calc(5px + 13vw + 0.8vh)"),Object(R.a)(a,"fontWeight",900),Object(R.a)(a,"letterSpacing","0.15em"),Object(R.a)(a,"margin","auto"),Object(R.a)(a,"textTransform","uppercase"),Object(R.a)(a,"userSelect","none"),Object(R.a)(a,"backgroundColor","#060629"),Object(R.a)(a,"border","1px red"),Object(R.a)(a,"color","#fff"),Object(R.a)(a,"mixBlendMode","multiply"),a),alertContainer:(n={},Object(R.a)(n,e.breakpoints.up("xs"),{width:"300px"}),Object(R.a)(n,e.breakpoints.up("sm"),{width:"400px"}),Object(R.a)(n,"margin","auto"),n),alert:(c={position:"absolute",top:"10vh"},Object(R.a)(c,e.breakpoints.up("xs"),{width:"300px"}),Object(R.a)(c,e.breakpoints.up("sm"),{width:"400px"}),c)}})),Vt=function(e){var t=e.setUser,r=e.alert,n=Object(j.a)().t,c=Object(d.f)(),o=Lt(),s=Object(re.a)("(max-width:600px)"),i=U(Object(K.jsx)(Dt,{}));Object(a.useEffect)((function(){/^(\/recoverylink)+/.test(c.location.pathname)&&i.handleClickOpen(!0)}),[]);var u=U(Object(K.jsx)(Nt,{setUser:t})),l=U(Object(K.jsx)(Wt,{setUser:t}));return Object(K.jsxs)("div",{children:[s?Object(K.jsx)(L.a,{component:"h1",variant:"h3",className:o.titleMobile,align:"center",children:"HYPERTUBE"}):Object(K.jsx)("div",{className:o.cover,children:Object(K.jsxs)("div",{className:o.video,children:[Object(K.jsx)(st.a,{url:"https://www.youtube.com/embed/y2TET3G0sJ4?controls=0&showinfo=0&rel=0&autoplay=1&loop=1&mute=1&playlist=y2TET3G0sJ4",width:"100%",height:"100%",id:"myId",display:"initial",position:"relative",allowFullScreen:!0}),Object(K.jsx)("h1",{className:o.text,children:"HYPERTUBE"})]})}),Object(K.jsxs)(v.a,{mt:5,display:"flex",justifyContent:"center",className:o.box,children:[Object(K.jsx)(v.a,{m:3,style:{alignSelf:"center"},children:Object(K.jsx)(se.a,{className:o.button,type:"submit",variant:"outlined",color:"primary",onClick:u.handleClickOpen,children:n("login.login")})}),Object(K.jsx)(v.a,{m:3,style:{alignSelf:"center"},children:Object(K.jsx)(se.a,{className:o.button,type:"submit",variant:"outlined",color:"secondary",onClick:l.handleClickOpen,children:n("createAccount.create")})})]}),r.values.show&&Object(K.jsx)(v.a,{className:o.alertContainer,children:Object(K.jsx)(te.a,{className:o.alert,severity:r.values.severity,onClose:r.closeAlert,children:r.values.message})}),Object(K.jsx)(ee,Object(S.a)({},u)),Object(K.jsx)(ee,Object(S.a)({},l)),Object(K.jsx)(ee,Object(S.a)({},i))]})},zt=r(185),Gt=r.n(zt),Ut=r(186),Xt=r.n(Ut),Yt=r(187),Ft=r.n(Yt),Ht=r(429),Zt=r(430),qt=r(184),Jt=r.n(qt),Qt=Object(P.a)((function(){return{imageContainer:{width:"200px",height:"200px",overflow:"hidden",marginTop:"16px",display:"flex",alignItems:"center",justifyContent:"center"},image:{maxWidth:"200px",maxHeight:"200px",display:"block",cursor:"pointer"},input:{display:"none"},deleteButton:{zIndex:10,position:"relative",left:"85px",top:"-35px"}}})),Kt=function(e){var t=e.avatar,r=e.setAvatar,n=Object(a.useState)({show:!1,message:"",severity:""}),c=Object(b.a)(n,2),o=c[0],s=c[1],i=Object(j.a)().t,u=Qt();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(v.a,{className:u.imageContainer,children:[Object(K.jsx)("input",{accept:"image/*",className:u.input,id:"upload-input","data-testid":"upload-input",type:"file",onChange:function(e){e.preventDefault();var t=new FileReader,a=e.target.files[0];a&&(a.name.match(/.(jpg|jpeg|png|gif)$/i)?a.size>35e4?s({show:!0,message:i("profile.imgSize"),severity:"error"}):(t.onloadend=function(){r(t.result)},t.readAsDataURL(a),o.show&&s(Object(S.a)(Object(S.a)({},o),{},{show:!1}))):s({show:!0,message:i("profile.notImage"),severity:"error"}))}}),Object(K.jsx)("label",{htmlFor:"upload-input",children:Object(K.jsx)("img",{className:u.image,src:t||xe,alt:"current profile picture"})})]}),t&&Object(K.jsx)(q.a,{className:u.deleteButton,variant:"button",size:"small",color:"inherit",onClick:function(){r(null)},title:"delete",children:Object(K.jsx)(Jt.a,{title:"trash can"})},"logout"),o.show&&Object(K.jsx)(te.a,{severity:o.severity,onClose:function(){return s(Object(S.a)(Object(S.a)({},o),{},{show:!1}))},children:o.message})]})};Kt.defaultProps={avatar:null};var $t=Kt,_t=function(e){var t=e.classes,r=e.alert,a=e.setAlert,n=e.handleUpdate,c=Object(j.a)().t,o=bt("password","password","update-old-password"),s=bt("password","password","update-password"),i=bt("password","confirmPassword","update-confirm-pw"),b=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.value&&s.value&&i.value){e.next=3;break}return e.abrupt("return");case 3:return r={oldPassword:o.value,password:s.value,confirmPassword:i.value},e.next=6,n(r,a,{oldPassword:o,password:s,confirmPassword:i});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(K.jsxs)("form",{className:t.form,onSubmit:b,noValidate:!0,children:[Object(K.jsx)(vt,{values:o,label:c("form.currentPassword"),autocomplete:"old-pwd",required:!0}),Object(K.jsx)(vt,{values:s,label:c("form.newPassword"),autocomplete:"new-pwd"}),Object(K.jsx)(vt,{values:i,label:c("form.confirmPassword"),autocomplete:"new-pwd"}),r.show&&Object(K.jsx)(te.a,{className:t.alert,severity:r.severity,onClose:function(){return a(Object(S.a)(Object(S.a)({},r),{},{show:!1}))},children:r.message}),Object(K.jsx)(xt,{name:c("myProfile.updatePassword")})]})},er=function(e){var t=e.classes,r=e.userData,n=e.alert,c=e.setAlert,o=e.handleUpdate,s=Object(j.a)().t,i=bt("text","updateUsername","update-username"),d=bt("text","updateName","update-firstname"),m=bt("text","updateName","update-lastname"),p=bt("email","email","update-email"),f=Object(a.useState)({label:"",code:""}),h=Object(b.a)(f,2),g=h[0],v=h[1],O=[{label:s("form.en"),code:"en"},{label:s("form.de"),code:"de"},{label:s("form.fi"),code:"fi"},{label:s("form.ru"),code:"ru"}];Object(a.useEffect)((function(){v(O.find((function(e){return e.code===r.language})))}),[r.language]);var x=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={},i.value&&i.value!==r.username&&(a.username=i.value),p.value&&p.value!==r.email&&(a.email=p.value),d.value&&d.value!==r.firstName&&(a.firstname=d.value),m.value&&m.value!==r.lastName&&(a.lastname=m.value),g&&g.code!==r.language&&(a.language=g.code),e.next=9,o(a,c,{username:i,firstName:d,lastName:m,email:p});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g?Object(K.jsxs)("form",{className:t.form,onSubmit:x,noValidate:!0,children:[Object(K.jsx)(vt,{values:i,label:"".concat(s("form.username"),": ").concat(r.username)}),Object(K.jsx)(vt,{values:d,label:"".concat(s("form.firstName"),": ").concat(r.firstname)}),Object(K.jsx)(vt,{values:m,label:"".concat(s("form.lastName"),": ").concat(r.lastname)}),Object(K.jsx)(vt,{values:p,label:"".concat(s("form.email"),": ").concat(r.email)}),Object(K.jsx)(He.a,{id:"language",value:g,options:O,getOptionLabel:function(e){return e.label},getOptionSelected:function(e,t){return e.value===t.value},className:t.select,onChange:function(e,t){null!==t&&v(t)},renderInput:function(e){return Object(K.jsx)(Ze.a,Object(S.a)(Object(S.a)({required:!0},e),{},{label:s("form.selectLanguage"),variant:"outlined"}))}}),n.show&&Object(K.jsx)(te.a,{className:t.alert,severity:n.severity,onClose:function(){return c(Object(S.a)(Object(S.a)({},n),{},{show:!1}))},children:n.message}),Object(K.jsx)(xt,{name:s("myProfile.update")})]}):null},tr=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(6),marginBottom:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},column:{display:"flex",flexDirection:"column",alignItems:"center",padding:0},form:{width:"100%",marginTop:e.spacing(1)},select:{width:"100%",marginTop:e.spacing(2)},alert:{marginTop:e.spacing(2)}}})),rr=function(e){var t=e.user,r=e.setUser,n=Object(a.useState)({language:""}),c=Object(b.a)(n,2),o=c[0],s=c[1],i=Object(a.useState)(null),d=Object(b.a)(i,2),m=d[0],p=d[1],f={show:!1,message:"",severity:""},v=Object(a.useState)(f),O=Object(b.a)(v,2),x=O[0],w=O[1],y=Object(a.useState)(f),A=Object(b.a)(y,2),k=A[0],C=A[1],E=tr(),I=Object(j.a)().t,N=function(e,t,r){switch(e.statusCode){case 401:t({show:!0,message:I("error.unauthorized"),severity:"error"});break;case 400:yt.showErrors(e.details,r);break;case 500:t({show:!0,message:I("error.server"),severity:"error"});break;default:t({show:!0,message:I("error.unexpected"),severity:"error"})}},R=function(){var e=Object(l.a)(u.a.mark((function e(a,n,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(f),w(f),o.avatarBase64String!==m&&(a.avatarBase64String=m),0!==Object.keys(a).length){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,Pt.update(t.userId,a);case 8:s(Object(S.a)(Object(S.a)(Object(S.a)({},o),a),{},{avatarBase64String:m})),a.language&&r(Object(S.a)(Object(S.a)({},t),{},{lang:a.language})),n({show:!0,message:"Account successfully updated",severity:"success"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),N(e.t0.response.data,n,c);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,r,a){return e.apply(this,arguments)}}(),P={classes:E,userData:o,alert:x,setAlert:w,handleUpdate:R},T={classes:E,alert:k,setAlert:C,handleUpdate:R};return Object(a.useEffect)((function(){Pt.get(t.userId).then((function(e){s(e)})).catch((function(e){N(e.response.data,w,{})}))}),[]),Object(a.useEffect)((function(){o&&o.avatarBase64String&&p(o.avatarBase64String)}),[o]),o?Object(K.jsxs)(g.a,{component:"main",className:E.paper,maxWidth:"sm",children:[Object(K.jsx)(h.a,{}),Object(K.jsx)(L.a,{component:"h1",variant:"h5",gutterBottom:!0,children:I("myProfile.title")}),Object(K.jsxs)(B.a,{container:!0,spacing:6,children:[Object(K.jsx)(B.a,{item:!0,xs:12,sm:5,className:E.column,children:Object(K.jsx)($t,{avatar:m,setAvatar:p})}),Object(K.jsxs)(B.a,{item:!0,xs:12,sm:7,className:E.column,children:[Object(K.jsx)(er,Object(S.a)({},P)),o.hasPw&&Object(K.jsx)(_t,Object(S.a)({},T))]})]})]}):null},ar=Object(P.a)((function(e){return{button:{"&:hover":{background:"inherit",color:e.palette.primary.main}}}})),nr=Object(d.h)((function(e){var t=e.user,r=e.setUser,a=e.clearFilter,n=e.setClearFilter,c=Object(j.a)().t,o=ar(),s=Object(re.a)("(max-width:600px)"),i=U(Object(K.jsx)(rr,{user:t,setUser:r}),"sm"),u=[{icon:Object(K.jsx)(Gt.a,{}),onClick:function(){n(!a)},text:"Hypertube"},{icon:Object(K.jsx)(Xt.a,{}),onClick:i.handleClickOpen,text:c("navbar.profile")},{icon:Object(K.jsx)(Ft.a,{}),onClick:function(){localStorage.removeItem("token"),r({userId:"",lang:""})},text:c("navbar.logout")}];return Object(K.jsxs)(Ht.a,{style:{padding:0,backgroundColor:"#1b1d2f"},children:[Object(K.jsx)(Zt.a,{children:Object(K.jsx)("div",{style:{width:"100%"},children:Object(K.jsx)(v.a,{display:"flex",children:u.map((function(e,t){return Object(K.jsx)(v.a,{p:1,m:s?"auto":"",flexGrow:s||0!==t?"":1,children:Object(K.jsx)(se.a,{startIcon:e.icon,size:"large",color:"inherit",className:o.button,onClick:e.onClick,children:s?"":e.text})},"nav-".concat(t))}))})})}),Object(K.jsx)(ee,Object(S.a)({},i))]})})),cr=Object(P.a)((function(e){return{stickyBottom:{position:"fixed",bottom:0,width:"100%"},button:{color:e.palette.text.secondary}}})),or=function(){var e=cr(),t=Object(re.a)("(max-width:600px)");return Object(K.jsx)("div",{children:!t&&Object(K.jsxs)(v.a,{className:e.stickyBottom,pt:4,pb:2,zIndex:"1",bgcolor:"background.secondary",color:"text.secondary",textAlign:"center",children:[Object(K.jsxs)(L.a,{variant:"body2",children:[" ","\xa9 Copyright 2021 All Rights Reserved."," "]}),[{name:"tkuumola",github:"https://github.com/T7Q"},{name:"dmukaliyeva",github:"https://github.com/DianaMukaliyeva"},{name:"ismelich",github:"https://github.com/iljaSL"},{name:"llahti",github:"https://github.com/lapaset"},{name:"ehalmkro",github:"https://github.com/ehalmkro"}].map((function(t,r){return Object(K.jsxs)("span",{children:[Object(K.jsx)(V.a,{title:"Open GitHub",placement:"top",children:Object(K.jsx)(se.a,{size:"small",target:"_blank",href:t.github,className:e.button,children:t.name})})," ",4!==r?" & ":""]},r)}))]})})};var sr=function(){var e=Object(a.useState)({userId:"",lang:""}),t=Object(b.a)(e,2),r=t[0],n=t[1],c=Object(d.g)(),o=Object(d.f)(),i=Object(a.useState)(!1),O=Object(b.a)(i,2),x=O[0],w=O[1],y=fe(),A=Object(j.a)().t;return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.closeAlert(),(t=localStorage.getItem("token"))||!c.search.startsWith("?auth=")){e.next=13;break}return r=c.search.substr(6),e.prev=4,e.next=7,gt.getToken(r);case 7:t=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),y.showError(A("login.tryAgain"));case 13:if(t)try{a=Object(m.a)(t),dt(t),n({userId:a.id,lang:a.lang}),o.push("/")}catch(s){y.showError(A("login.tryAgain"))}case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){r.lang&&p.a.changeLanguage(r.lang)}),[r]),Object(K.jsxs)(f.a,{theme:E,children:[Object(K.jsx)(h.a,{}),Object(K.jsxs)(s.a,{children:[Object(K.jsxs)(g.a,{children:[r.userId&&Object(K.jsx)(nr,{clearFilter:x,setClearFilter:w,user:r,setUser:n}),Object(K.jsxs)(v.a,{mt:10,children:[Object(K.jsx)(d.a,{exact:!0,path:"/",children:r.userId?Object(K.jsx)(ot,{clearFilter:x,user:r,setUser:n}):Object(K.jsx)(Vt,{setUser:n,alert:y})}),Object(K.jsx)(d.c,{children:Object(K.jsx)(d.a,{path:"/recoverylink",children:Object(K.jsx)(Vt,{setUser:n,alert:y})})})]})]}),Object(K.jsx)(or,{})]})]})},ir=r(188),ur=r(189),lr=r(85);p.a.use(ir.a).use(ur.a).use(lr.e).init({fallbackLng:"en",interpolation:{escapeValue:!1}});p.a;o.a.render(Object(K.jsx)(a.Suspense,{fallback:Object(K.jsx)("div",{children:"Loading"}),children:Object(K.jsx)(s.a,{children:Object(K.jsx)(sr,{})})}),document.getElementById("root"))}},[[349,14,15]]]);
//# sourceMappingURL=main.49431ce4.chunk.js.map